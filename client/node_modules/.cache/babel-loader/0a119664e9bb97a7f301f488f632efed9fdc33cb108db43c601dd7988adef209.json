{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"D:\\\\IntPrep\\\\client\\\\src\\\\components\\\\interview\\\\InterviewSession.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport { useToast } from \"../../contexts/ToastContext\";\nimport { Clock, MessageSquare, ArrowRight, Pause, Play, Sparkles } from \"lucide-react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst formatTime = seconds => {\n  const mins = Math.floor(seconds / 60);\n  const secs = seconds % 60;\n  return `${mins}m ${secs.toString().padStart(2, \"0\")}s`;\n};\nexport default function InterviewSession({\n  config,\n  onComplete\n}) {\n  _s();\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answer, setAnswer] = useState(\"\");\n  const [answers, setAnswers] = useState([]);\n  const [timeRemaining, setTimeRemaining] = useState(config.duration * 60);\n  const [isPaused, setIsPaused] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [interviewId, setInterviewId] = useState(null);\n  const [evaluatingAnswer, setEvaluatingAnswer] = useState(false);\n  const [questionGenerationError, setQuestionGenerationError] = useState(false);\n  const {\n    user\n  } = useAuth();\n  const {\n    toast\n  } = useToast();\n  const hasInitializedForKeyRef = useRef(null);\n  const errorToastShownRef = useRef(false);\n  // Build a stable key for the current interview config\n  const configKey = `${config.role}|${config.experience}|${config.difficulty}|${config.duration}`;\n\n  // Enhanced question generation with better error handling and dynamic AI generation\n  useEffect(() => {\n    if (!(user !== null && user !== void 0 && user.uid)) {\n      // Wait until auth is ready before initializing\n      return;\n    }\n\n    // Prevent re-initializing for the same config\n    if (hasInitializedForKeyRef.current === configKey) {\n      return;\n    }\n    hasInitializedForKeyRef.current = configKey;\n    let isMounted = true;\n    const initializeInterview = async () => {\n      try {\n        var _questionsResponse$da, _questionsResponse$da2;\n        setLoading(true);\n        setQuestionGenerationError(false);\n\n        // Set up axios defaults with auth token (kept global for other requests)\n        const token = await user.getIdToken();\n        axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n        console.log(\"[v0] Starting interview initialization with config:\", config);\n\n        // Create interview record\n        const interviewResponse = await axios.post(\"/api/interviews\", {\n          ...config,\n          userId: user.uid,\n          startedAt: new Date(),\n          status: \"in_progress\"\n        });\n        if (!isMounted) return;\n        console.log(\"[v0] Interview created:\", interviewResponse.data);\n        setInterviewId(interviewResponse.data._id);\n\n        // Generate questions\n        const questionsResponse = await axios.post(\"/api/questions/generate\", {\n          role: config.role,\n          experience: config.experience,\n          difficulty: config.difficulty,\n          count: Math.max(3, Math.ceil(config.duration / 6)),\n          seed: Date.now(),\n          previousAnswers: []\n        });\n        if (!isMounted) return;\n        console.log(\"[v0] Questions generated:\", questionsResponse.data);\n        if (((_questionsResponse$da = questionsResponse.data) === null || _questionsResponse$da === void 0 ? void 0 : (_questionsResponse$da2 = _questionsResponse$da.questions) === null || _questionsResponse$da2 === void 0 ? void 0 : _questionsResponse$da2.length) > 0) {\n          setQuestions(questionsResponse.data.questions);\n          toast.success(`Generated ${questionsResponse.data.questions.length} personalized questions!`);\n        } else {\n          throw new Error(\"No questions received from API\");\n        }\n        setLoading(false);\n      } catch (error) {\n        if (!isMounted) return;\n        console.error(\"[v0] Failed to initialize interview:\", error);\n        setQuestionGenerationError(true);\n        const fallbackQuestions = generateFallbackQuestions(config);\n        setQuestions(fallbackQuestions);\n        if (!errorToastShownRef.current) {\n          toast.error(\"AI question generation failed. Using backup questions.\");\n          errorToastShownRef.current = true;\n        }\n        setLoading(false);\n      }\n    };\n    initializeInterview();\n    return () => {\n      isMounted = false;\n    };\n  }, [configKey, user === null || user === void 0 ? void 0 : user.uid]);\n\n  // Enhanced fallback question generation with more variety\n  const generateFallbackQuestions = config => {\n    const baseQuestions = [`Tell me about yourself and why you're interested in the ${config.role} position.`, `What experience do you have that makes you suitable for this ${config.role} role?`, \"Describe a challenging project you worked on and how you overcame the obstacles.\", \"How do you stay updated with the latest trends and technologies in your field?\", \"Tell me about a time when you had to work under pressure. How did you handle it?\"];\n    const roleSpecificQuestions = {\n      \"Software Engineer\": [\"Explain the difference between synchronous and asynchronous programming.\", \"How do you approach debugging a complex issue in your code?\", \"Describe your experience with version control systems like Git.\", \"What's your preferred development methodology and why?\"],\n      \"Frontend Developer\": [\"How do you ensure cross-browser compatibility in your applications?\", \"Explain the concept of responsive design and how you implement it.\", \"What's your approach to optimizing web performance?\", \"How do you handle state management in complex applications?\"],\n      \"Backend Developer\": [\"How do you design scalable APIs?\", \"Explain database indexing and its importance for performance.\", \"Describe your experience with microservices architecture.\", \"How do you handle security in backend applications?\"],\n      \"Data Scientist\": [\"How do you handle missing data in datasets?\", \"Explain the bias-variance tradeoff in machine learning.\", \"Describe your approach to feature selection and engineering.\", \"How do you validate and test your machine learning models?\"]\n    };\n    const specificQuestions = roleSpecificQuestions[config.role] || [];\n    const allQuestions = [...baseQuestions, ...specificQuestions];\n\n    // Shuffle and return appropriate number of questions\n    const shuffled = allQuestions.sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, Math.max(3, Math.ceil(config.duration / 6)));\n  };\n\n  // Enhanced answer handling with better AI evaluation and follow-up question generation\n  const handleNextQuestion = async () => {\n    if (!answer.trim()) {\n      toast.error(\"Please provide an answer before proceeding.\");\n      return;\n    }\n    setEvaluatingAnswer(true);\n    try {\n      console.log(\"[v0] Evaluating answer for question:\", questions[currentQuestionIndex]);\n\n      // Evaluate current answer using Gemini AI\n      const evaluationResponse = await axios.post(\"/api/questions/evaluate\", {\n        question: questions[currentQuestionIndex],\n        answer: answer.trim(),\n        role: config.role,\n        experience: config.experience\n      });\n      console.log(\"[v0] Answer evaluation received:\", evaluationResponse.data);\n      const evaluation = evaluationResponse.data;\n      const newAnswer = {\n        question: questions[currentQuestionIndex],\n        answer: answer.trim(),\n        timeSpent: 0,\n        score: evaluation.score || 7,\n        feedback: evaluation.feedback || \"Good answer provided.\",\n        strengths: evaluation.strengths || [\"Answer provided\"],\n        improvements: evaluation.improvements || [\"Consider adding more detail\"],\n        timestamp: new Date()\n      };\n      const updatedAnswers = [...answers, newAnswer];\n      setAnswers(updatedAnswers);\n\n      // Generate follow-up questions dynamically based on previous answers\n      if (currentQuestionIndex < questions.length - 1) {\n        // Check if we should generate a follow-up question based on the answer\n        if (evaluation.score >= 8 && updatedAnswers.length < Math.ceil(config.duration / 4)) {\n          try {\n            const followUpResponse = await axios.post(\"/api/questions/generate\", {\n              role: config.role,\n              experience: config.experience,\n              difficulty: config.difficulty,\n              count: 1,\n              previousAnswers: updatedAnswers.map(a => ({\n                question: a.question,\n                answer: a.answer,\n                score: a.score\n              })),\n              generateFollowUp: true\n            });\n            if (followUpResponse.data.questions && followUpResponse.data.questions.length > 0) {\n              const newQuestions = [...questions];\n              newQuestions.splice(currentQuestionIndex + 1, 0, followUpResponse.data.questions[0]);\n              setQuestions(newQuestions);\n              console.log(\"[v0] Generated follow-up question:\", followUpResponse.data.questions[0]);\n            }\n          } catch (followUpError) {\n            console.log(\"[v0] Follow-up question generation failed, continuing with existing questions\");\n          }\n        }\n        setCurrentQuestionIndex(currentQuestionIndex + 1);\n        setAnswer(\"\");\n      } else {\n        await handleCompleteInterview(updatedAnswers);\n      }\n    } catch (error) {\n      console.error(\"[v0] Failed to evaluate answer:\", error);\n      toast.error(\"Failed to evaluate answer, but continuing interview.\");\n\n      // Continue without evaluation\n      const newAnswer = {\n        question: questions[currentQuestionIndex],\n        answer: answer.trim(),\n        timeSpent: 0,\n        score: 7,\n        // Default score\n        feedback: \"Answer recorded successfully.\",\n        strengths: [\"Answer provided\"],\n        improvements: [\"Consider adding more specific examples\"],\n        timestamp: new Date()\n      };\n      const updatedAnswers = [...answers, newAnswer];\n      setAnswers(updatedAnswers);\n      setAnswer(\"\");\n      if (currentQuestionIndex < questions.length - 1) {\n        setCurrentQuestionIndex(currentQuestionIndex + 1);\n      } else {\n        await handleCompleteInterview(updatedAnswers);\n      }\n    } finally {\n      setEvaluatingAnswer(false);\n    }\n  };\n\n  // Enhanced interview completion with comprehensive AI feedback\n  const handleCompleteInterview = async (finalAnswers = answers) => {\n    try {\n      console.log(\"[v0] Completing interview with answers:\", finalAnswers);\n      const averageScore = finalAnswers.length > 0 ? finalAnswers.reduce((sum, a) => sum + (a.score || 7), 0) / finalAnswers.length : 7;\n\n      // Generate comprehensive feedback using AI\n      const feedbackResponse = await axios.post(\"/api/questions/feedback\", {\n        questions: finalAnswers.map(a => a.question),\n        answers: finalAnswers.map(a => a.answer),\n        role: config.role,\n        experience: config.experience,\n        overallScore: averageScore,\n        individualScores: finalAnswers.map(a => a.score || 7)\n      });\n      console.log(\"[v0] Comprehensive feedback received:\", feedbackResponse.data);\n      const comprehensiveFeedback = feedbackResponse.data;\n      const interviewData = {\n        questions: finalAnswers,\n        status: \"completed\",\n        completedAt: new Date(),\n        overallScore: averageScore,\n        feedback: comprehensiveFeedback,\n        timeSpent: config.duration * 60 - timeRemaining,\n        config: config\n      };\n\n      // Update interview record\n      if (interviewId) {\n        await axios.put(`/api/interviews/${interviewId}`, interviewData);\n        console.log(\"[v0] Interview record updated successfully\");\n      }\n      toast.success(\"Interview completed successfully!\");\n      onComplete({\n        ...config,\n        ...interviewData\n      });\n    } catch (error) {\n      console.error(\"[v0] Failed to complete interview:\", error);\n      toast.error(\"Failed to save interview results, but your answers were recorded.\");\n\n      // Still complete the interview with basic data\n      onComplete({\n        ...config,\n        questions: finalAnswers,\n        status: \"completed\",\n        overallScore: finalAnswers.length > 0 ? finalAnswers.reduce((sum, a) => sum + (a.score || 7), 0) / finalAnswers.length : 7,\n        timeSpent: config.duration * 60 - timeRemaining\n      });\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-2\",\n          children: \"Generating Your Personalized Interview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-2\",\n          children: [\"Our AI is creating unique questions tailored for your \", config.role, \" interview...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Experience Level: \", config.experience]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Difficulty: \", config.difficulty]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Duration: \", config.duration, \" minutes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this);\n  }\n  if (questions.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500 text-6xl mb-4\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-2\",\n          children: \"Unable to Generate Questions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-4\",\n          children: questionGenerationError ? \"AI question generation failed. Please check your internet connection and try again.\" : \"No questions were generated. Please try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors\",\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-sm p-6 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 text-blue-600\",\n                children: [/*#__PURE__*/_jsxDEV(Clock, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold text-lg\",\n                  children: formatTime(timeRemaining)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsPaused(!isPaused),\n                className: \"flex items-center gap-2 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors\",\n                children: [isPaused ? /*#__PURE__*/_jsxDEV(Play, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 31\n                }, this) : /*#__PURE__*/_jsxDEV(Pause, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 62\n                }, this), isPaused ? \"Resume\" : \"Pause\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 text-purple-600 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"AI-Powered\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Question \", currentQuestionIndex + 1, \" of \", questions.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full bg-gray-200 rounded-full h-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n                style: {\n                  width: `${(currentQuestionIndex + 1) / questions.length * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-sm p-8 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(MessageSquare, {\n                  className: \"w-5 h-5 text-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-xl font-semibold text-gray-900 mb-4\",\n                children: questions[currentQuestionIndex]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: answer,\n                onChange: e => setAnswer(e.target.value),\n                placeholder: \"Type your answer here... Be specific and provide examples when possible.\",\n                className: \"w-full h-40 px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n                disabled: isPaused || evaluatingAnswer\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-2 text-sm text-gray-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [answer.length, \" characters\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\uD83D\\uDCA1 Tip: Include specific examples and quantify your achievements\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600\",\n            children: answers.length > 0 && `${answers.length} question${answers.length > 1 ? \"s\" : \"\"} completed`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleCompleteInterview(),\n              className: \"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors\",\n              disabled: evaluatingAnswer,\n              children: \"End Interview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNextQuestion,\n              disabled: !answer.trim() || isPaused || evaluatingAnswer,\n              className: \"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white font-semibold py-2 px-6 rounded-lg transition-colors\",\n              children: evaluatingAnswer ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 21\n                }, this), \"Evaluating with AI...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [currentQuestionIndex < questions.length - 1 ? \"Next Question\" : \"Complete Interview\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 5\n  }, this);\n}\n_s(InterviewSession, \"SVZCka3MrqPhW0zVEvxMtveMpp4=\", false, function () {\n  return [useAuth, useToast];\n});\n_c = InterviewSession;\nvar _c;\n$RefreshReg$(_c, \"InterviewSession\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useRef","useAuth","useToast","Clock","MessageSquare","ArrowRight","Pause","Play","Sparkles","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","formatTime","seconds","mins","Math","floor","secs","toString","padStart","InterviewSession","config","onComplete","questions","setQuestions","currentQuestionIndex","setCurrentQuestionIndex","answer","setAnswer","answers","setAnswers","timeRemaining","setTimeRemaining","duration","isPaused","setIsPaused","loading","setLoading","interviewId","setInterviewId","evaluatingAnswer","setEvaluatingAnswer","questionGenerationError","setQuestionGenerationError","user","toast","hasInitializedForKeyRef","errorToastShownRef","configKey","role","experience","difficulty","uid","current","isMounted","initializeInterview","_questionsResponse$da","_questionsResponse$da2","token","getIdToken","defaults","headers","common","console","log","interviewResponse","post","userId","startedAt","Date","status","data","_id","questionsResponse","count","max","ceil","seed","now","previousAnswers","length","success","Error","error","fallbackQuestions","generateFallbackQuestions","baseQuestions","roleSpecificQuestions","specificQuestions","allQuestions","shuffled","sort","random","slice","handleNextQuestion","trim","evaluationResponse","question","evaluation","newAnswer","timeSpent","score","feedback","strengths","improvements","timestamp","updatedAnswers","followUpResponse","map","a","generateFollowUp","newQuestions","splice","followUpError","handleCompleteInterview","finalAnswers","averageScore","reduce","sum","feedbackResponse","overallScore","individualScores","comprehensiveFeedback","interviewData","completedAt","put","className","children","fileName","lineNumber","columnNumber","onClick","window","location","reload","style","width","value","onChange","e","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["D:/IntPrep/client/src/components/interview/InterviewSession.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { useAuth } from \"../../contexts/AuthContext\"\nimport { useToast } from \"../../contexts/ToastContext\"\nimport { Clock, MessageSquare, ArrowRight, Pause, Play, Sparkles } from \"lucide-react\"\nimport axios from \"axios\"\n\nconst formatTime = (seconds) => {\n  const mins = Math.floor(seconds / 60)\n  const secs = seconds % 60\n  return `${mins}m ${secs.toString().padStart(2, \"0\")}s`\n}\n\nexport default function InterviewSession({ config, onComplete }) {\n  const [questions, setQuestions] = useState([])\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)\n  const [answer, setAnswer] = useState(\"\")\n  const [answers, setAnswers] = useState([])\n  const [timeRemaining, setTimeRemaining] = useState(config.duration * 60)\n  const [isPaused, setIsPaused] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [interviewId, setInterviewId] = useState(null)\n  const [evaluatingAnswer, setEvaluatingAnswer] = useState(false)\n  const [questionGenerationError, setQuestionGenerationError] = useState(false)\n\n  const { user } = useAuth()\n  const { toast } = useToast()\n\n  const hasInitializedForKeyRef = useRef(null)\n  const errorToastShownRef = useRef(false)\n  // Build a stable key for the current interview config\n  const configKey = `${config.role}|${config.experience}|${config.difficulty}|${config.duration}`\n\n  // Enhanced question generation with better error handling and dynamic AI generation\n  useEffect(() => {\n    if (!user?.uid) {\n      // Wait until auth is ready before initializing\n      return\n    }\n\n    // Prevent re-initializing for the same config\n    if (hasInitializedForKeyRef.current === configKey) {\n      return\n    }\n    hasInitializedForKeyRef.current = configKey\n\n    let isMounted = true\n\n    const initializeInterview = async () => {\n      try {\n        setLoading(true)\n        setQuestionGenerationError(false)\n\n        // Set up axios defaults with auth token (kept global for other requests)\n        const token = await user.getIdToken()\n        axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n\n        console.log(\"[v0] Starting interview initialization with config:\", config)\n\n        // Create interview record\n        const interviewResponse = await axios.post(\"/api/interviews\", {\n          ...config,\n          userId: user.uid,\n          startedAt: new Date(),\n          status: \"in_progress\",\n        })\n\n        if (!isMounted) return\n        console.log(\"[v0] Interview created:\", interviewResponse.data)\n        setInterviewId(interviewResponse.data._id)\n\n        // Generate questions\n        const questionsResponse = await axios.post(\"/api/questions/generate\", {\n          role: config.role,\n          experience: config.experience,\n          difficulty: config.difficulty,\n          count: Math.max(3, Math.ceil(config.duration / 6)),\n          seed: Date.now(),\n          previousAnswers: [],\n        })\n\n        if (!isMounted) return\n        console.log(\"[v0] Questions generated:\", questionsResponse.data)\n\n        if (questionsResponse.data?.questions?.length > 0) {\n          setQuestions(questionsResponse.data.questions)\n          toast.success(`Generated ${questionsResponse.data.questions.length} personalized questions!`)\n        } else {\n          throw new Error(\"No questions received from API\")\n        }\n\n        setLoading(false)\n      } catch (error) {\n        if (!isMounted) return\n        console.error(\"[v0] Failed to initialize interview:\", error)\n        setQuestionGenerationError(true)\n\n        const fallbackQuestions = generateFallbackQuestions(config)\n        setQuestions(fallbackQuestions)\n\n        if (!errorToastShownRef.current) {\n          toast.error(\"AI question generation failed. Using backup questions.\")\n          errorToastShownRef.current = true\n        }\n\n        setLoading(false)\n      }\n    }\n\n    initializeInterview()\n\n    return () => {\n      isMounted = false\n    }\n  }, [configKey, user?.uid])\n\n  // Enhanced fallback question generation with more variety\n  const generateFallbackQuestions = (config) => {\n    const baseQuestions = [\n      `Tell me about yourself and why you're interested in the ${config.role} position.`,\n      `What experience do you have that makes you suitable for this ${config.role} role?`,\n      \"Describe a challenging project you worked on and how you overcame the obstacles.\",\n      \"How do you stay updated with the latest trends and technologies in your field?\",\n      \"Tell me about a time when you had to work under pressure. How did you handle it?\",\n    ]\n\n    const roleSpecificQuestions = {\n      \"Software Engineer\": [\n        \"Explain the difference between synchronous and asynchronous programming.\",\n        \"How do you approach debugging a complex issue in your code?\",\n        \"Describe your experience with version control systems like Git.\",\n        \"What's your preferred development methodology and why?\",\n      ],\n      \"Frontend Developer\": [\n        \"How do you ensure cross-browser compatibility in your applications?\",\n        \"Explain the concept of responsive design and how you implement it.\",\n        \"What's your approach to optimizing web performance?\",\n        \"How do you handle state management in complex applications?\",\n      ],\n      \"Backend Developer\": [\n        \"How do you design scalable APIs?\",\n        \"Explain database indexing and its importance for performance.\",\n        \"Describe your experience with microservices architecture.\",\n        \"How do you handle security in backend applications?\",\n      ],\n      \"Data Scientist\": [\n        \"How do you handle missing data in datasets?\",\n        \"Explain the bias-variance tradeoff in machine learning.\",\n        \"Describe your approach to feature selection and engineering.\",\n        \"How do you validate and test your machine learning models?\",\n      ],\n    }\n\n    const specificQuestions = roleSpecificQuestions[config.role] || []\n    const allQuestions = [...baseQuestions, ...specificQuestions]\n\n    // Shuffle and return appropriate number of questions\n    const shuffled = allQuestions.sort(() => 0.5 - Math.random())\n    return shuffled.slice(0, Math.max(3, Math.ceil(config.duration / 6)))\n  }\n\n  // Enhanced answer handling with better AI evaluation and follow-up question generation\n  const handleNextQuestion = async () => {\n    if (!answer.trim()) {\n      toast.error(\"Please provide an answer before proceeding.\")\n      return\n    }\n\n    setEvaluatingAnswer(true)\n\n    try {\n      console.log(\"[v0] Evaluating answer for question:\", questions[currentQuestionIndex])\n\n      // Evaluate current answer using Gemini AI\n      const evaluationResponse = await axios.post(\"/api/questions/evaluate\", {\n        question: questions[currentQuestionIndex],\n        answer: answer.trim(),\n        role: config.role,\n        experience: config.experience,\n      })\n\n      console.log(\"[v0] Answer evaluation received:\", evaluationResponse.data)\n\n      const evaluation = evaluationResponse.data\n      const newAnswer = {\n        question: questions[currentQuestionIndex],\n        answer: answer.trim(),\n        timeSpent: 0,\n        score: evaluation.score || 7,\n        feedback: evaluation.feedback || \"Good answer provided.\",\n        strengths: evaluation.strengths || [\"Answer provided\"],\n        improvements: evaluation.improvements || [\"Consider adding more detail\"],\n        timestamp: new Date(),\n      }\n\n      const updatedAnswers = [...answers, newAnswer]\n      setAnswers(updatedAnswers)\n\n      // Generate follow-up questions dynamically based on previous answers\n      if (currentQuestionIndex < questions.length - 1) {\n        // Check if we should generate a follow-up question based on the answer\n        if (evaluation.score >= 8 && updatedAnswers.length < Math.ceil(config.duration / 4)) {\n          try {\n            const followUpResponse = await axios.post(\"/api/questions/generate\", {\n              role: config.role,\n              experience: config.experience,\n              difficulty: config.difficulty,\n              count: 1,\n              previousAnswers: updatedAnswers.map((a) => ({\n                question: a.question,\n                answer: a.answer,\n                score: a.score,\n              })),\n              generateFollowUp: true,\n            })\n\n            if (followUpResponse.data.questions && followUpResponse.data.questions.length > 0) {\n              const newQuestions = [...questions]\n              newQuestions.splice(currentQuestionIndex + 1, 0, followUpResponse.data.questions[0])\n              setQuestions(newQuestions)\n              console.log(\"[v0] Generated follow-up question:\", followUpResponse.data.questions[0])\n            }\n          } catch (followUpError) {\n            console.log(\"[v0] Follow-up question generation failed, continuing with existing questions\")\n          }\n        }\n\n        setCurrentQuestionIndex(currentQuestionIndex + 1)\n        setAnswer(\"\")\n      } else {\n        await handleCompleteInterview(updatedAnswers)\n      }\n    } catch (error) {\n      console.error(\"[v0] Failed to evaluate answer:\", error)\n      toast.error(\"Failed to evaluate answer, but continuing interview.\")\n\n      // Continue without evaluation\n      const newAnswer = {\n        question: questions[currentQuestionIndex],\n        answer: answer.trim(),\n        timeSpent: 0,\n        score: 7, // Default score\n        feedback: \"Answer recorded successfully.\",\n        strengths: [\"Answer provided\"],\n        improvements: [\"Consider adding more specific examples\"],\n        timestamp: new Date(),\n      }\n\n      const updatedAnswers = [...answers, newAnswer]\n      setAnswers(updatedAnswers)\n      setAnswer(\"\")\n\n      if (currentQuestionIndex < questions.length - 1) {\n        setCurrentQuestionIndex(currentQuestionIndex + 1)\n      } else {\n        await handleCompleteInterview(updatedAnswers)\n      }\n    } finally {\n      setEvaluatingAnswer(false)\n    }\n  }\n\n  // Enhanced interview completion with comprehensive AI feedback\n  const handleCompleteInterview = async (finalAnswers = answers) => {\n    try {\n      console.log(\"[v0] Completing interview with answers:\", finalAnswers)\n\n      const averageScore =\n        finalAnswers.length > 0 ? finalAnswers.reduce((sum, a) => sum + (a.score || 7), 0) / finalAnswers.length : 7\n\n      // Generate comprehensive feedback using AI\n      const feedbackResponse = await axios.post(\"/api/questions/feedback\", {\n        questions: finalAnswers.map((a) => a.question),\n        answers: finalAnswers.map((a) => a.answer),\n        role: config.role,\n        experience: config.experience,\n        overallScore: averageScore,\n        individualScores: finalAnswers.map((a) => a.score || 7),\n      })\n\n      console.log(\"[v0] Comprehensive feedback received:\", feedbackResponse.data)\n\n      const comprehensiveFeedback = feedbackResponse.data\n\n      const interviewData = {\n        questions: finalAnswers,\n        status: \"completed\",\n        completedAt: new Date(),\n        overallScore: averageScore,\n        feedback: comprehensiveFeedback,\n        timeSpent: config.duration * 60 - timeRemaining,\n        config: config,\n      }\n\n      // Update interview record\n      if (interviewId) {\n        await axios.put(`/api/interviews/${interviewId}`, interviewData)\n        console.log(\"[v0] Interview record updated successfully\")\n      }\n\n      toast.success(\"Interview completed successfully!\")\n\n      onComplete({\n        ...config,\n        ...interviewData,\n      })\n    } catch (error) {\n      console.error(\"[v0] Failed to complete interview:\", error)\n      toast.error(\"Failed to save interview results, but your answers were recorded.\")\n\n      // Still complete the interview with basic data\n      onComplete({\n        ...config,\n        questions: finalAnswers,\n        status: \"completed\",\n        overallScore:\n          finalAnswers.length > 0 ? finalAnswers.reduce((sum, a) => sum + (a.score || 7), 0) / finalAnswers.length : 7,\n        timeSpent: config.duration * 60 - timeRemaining,\n      })\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <h3 className=\"text-lg font-semibold mb-2\">Generating Your Personalized Interview</h3>\n          <p className=\"text-gray-600 mb-2\">\n            Our AI is creating unique questions tailored for your {config.role} interview...\n          </p>\n          <div className=\"text-sm text-gray-500\">\n            <p>Experience Level: {config.experience}</p>\n            <p>Difficulty: {config.difficulty}</p>\n            <p>Duration: {config.duration} minutes</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (questions.length === 0) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-red-500 text-6xl mb-4\">⚠️</div>\n          <h3 className=\"text-lg font-semibold mb-2\">Unable to Generate Questions</h3>\n          <p className=\"text-gray-600 mb-4\">\n            {questionGenerationError\n              ? \"AI question generation failed. Please check your internet connection and try again.\"\n              : \"No questions were generated. Please try again.\"}\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          {/* Header */}\n          <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"flex items-center gap-2 text-blue-600\">\n                  <Clock className=\"w-5 h-5\" />\n                  <span className=\"font-semibold text-lg\">{formatTime(timeRemaining)}</span>\n                </div>\n                <button\n                  onClick={() => setIsPaused(!isPaused)}\n                  className=\"flex items-center gap-2 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors\"\n                >\n                  {isPaused ? <Play className=\"w-4 h-4\" /> : <Pause className=\"w-4 h-4\" />}\n                  {isPaused ? \"Resume\" : \"Pause\"}\n                </button>\n                <div className=\"flex items-center gap-2 text-purple-600 text-sm\">\n                  <Sparkles className=\"w-4 h-4\" />\n                  <span>AI-Powered</span>\n                </div>\n              </div>\n              <div className=\"text-sm text-gray-600\">\n                Question {currentQuestionIndex + 1} of {questions.length}\n              </div>\n            </div>\n\n            {/* Progress bar */}\n            <div className=\"mt-4\">\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div\n                  className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${((currentQuestionIndex + 1) / questions.length) * 100}%` }}\n                ></div>\n              </div>\n            </div>\n          </div>\n\n          {/* Question */}\n          <div className=\"bg-white rounded-lg shadow-sm p-8 mb-6\">\n            <div className=\"flex items-start gap-4\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <MessageSquare className=\"w-5 h-5 text-blue-600\" />\n                </div>\n              </div>\n              <div className=\"flex-1\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">{questions[currentQuestionIndex]}</h2>\n                <textarea\n                  value={answer}\n                  onChange={(e) => setAnswer(e.target.value)}\n                  placeholder=\"Type your answer here... Be specific and provide examples when possible.\"\n                  className=\"w-full h-40 px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  disabled={isPaused || evaluatingAnswer}\n                />\n                <div className=\"flex justify-between items-center mt-2 text-sm text-gray-500\">\n                  <span>{answer.length} characters</span>\n                  <span>💡 Tip: Include specific examples and quantify your achievements</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Controls */}\n          <div className=\"flex justify-between items-center\">\n            <div className=\"text-sm text-gray-600\">\n              {answers.length > 0 && `${answers.length} question${answers.length > 1 ? \"s\" : \"\"} completed`}\n            </div>\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => handleCompleteInterview()}\n                className=\"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors\"\n                disabled={evaluatingAnswer}\n              >\n                End Interview\n              </button>\n              <button\n                onClick={handleNextQuestion}\n                disabled={!answer.trim() || isPaused || evaluatingAnswer}\n                className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white font-semibold py-2 px-6 rounded-lg transition-colors\"\n              >\n                {evaluatingAnswer ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                    Evaluating with AI...\n                  </>\n                ) : (\n                  <>\n                    {currentQuestionIndex < questions.length - 1 ? \"Next Question\" : \"Complete Interview\"}\n                    <ArrowRight className=\"w-4 h-4\" />\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}